/*
作者：薛翼舟
以下为检查简单禁手的函数，主要作用是优化禁手的判断，降低判断时间
*/

#include "checksimple.h"
#include "checkban.h"
#include "variable.h"
#include "score.h"
#include<stdio.h>
#include<time.h>
#define SIZE 15

int CheckSimpleBoard[SIZE][SIZE];
int CheckSimpleBan(int i,int j){
    time_t start = clock();
    int out1=0,out2=0,out3=0;
    if(i<0 ||i>=SIZE || j<0|| j>=SIZE)
        return 0;
    CheckSimpleBoard[i][j]=1;//???????????????????
    out1 = CheckSimpleLong(i,j)||CheckSimpleMulti4(i,j)||CheckSimpleMulti3(i,j);
    CheckSimpleBoard[i][j]=0;
    time_t end = clock();
    time_simpleban += ((double)end-start)/CLOCKS_PER_SEC;
    return out1;
}

int CheckSimpleLong(int i,int j){
    int out=0;
    if((CheckSimpleLongRow(i,j)!=0) ||(CheckSimpleLongCol(i,j)!=0) ||(CheckSimpleLongAtoD(i,j)!=0) ||(CheckSimpleLongBtoC(i,j)!=0)){
        out = 1;
    }
    return out;;
}

int CheckSimpleLongRow(int i,int j){
    int out=0;
    int ban;
    int k,r;
    int start = j-5>0? j-5: 0;//?????λ??????0
    int end = j+5<14? j+5: 14;//??????λ??????14
    for(k=start; k<=j; k++){
        ban=1;
        for(r=0;r<6;r++){
            if(k+r>end || (CheckSimpleBoard[i][k+r]!=1)){
                ban=0;//???????и?????6????????????6?????????????ж???????6?????????????????г????????????????????俪?λ?ü????ж??
                break;
            }
        }
        if(ban==1){
                out = ban;
                break;
        }
    }
    return out;
}

int CheckSimpleLongCol(int i,int j){
    int out=0;
    int ban;
    int k,r;
    int start = i-5>0? i-5: 0;//?????λ??????0
    int end = i+5<14? i+5: 14;//??????λ??????14
    for(k=start; k<=i; k++){
        ban=1;
        for(r=0;r<6;r++){
            if(k+r>end || (CheckSimpleBoard[k+r][j]!=1)){
                ban=0;//???????и?????6????????????6?????????????ж???????6?????????????????г????????????????????俪?λ?ü????ж??
                break;
            }
        }
        if(ban==1){
                out = ban;
                break;
        }
    }
    return out;
}

int CheckSimpleLongAtoD(int i,int j){//?ж?б????????????????????・????
    int ban;
    int out = 0;
    int k;

    for(k = -5; k <= 0; k++){
        ban=1;
        int r;
        int start_i = i + k;
        int start_j = j + k;

        
        if(start_i < 0 || start_j < 0)
            continue;

       
        if(start_i + 5 >= SIZE|| start_j + 5 >= SIZE)
            continue;

    
        for(r = 0; r < 6; r++){
            if(CheckSimpleBoard[start_i + r][start_j + r] != 1){
                ban=0;
                break;
            }
        }
        if(ban == 1){
            out = 1;
            break;
        }
    }
    return out;
}

int CheckSimpleLongBtoC(int i,int j){//?ж?б????????????????????・????
    int ban;
    int out = 0;
    int k;

    for(k = -5; k <= 0; k++){
        ban=1;
        int r;
        int start_i = i - k;
        int start_j = j + k;

        
        if(start_i >= SIZE || start_j < 0)
            continue;

       
        if(start_i - 5 < 0|| start_j + 5 >= SIZE)
            continue;

    
        for(r = 0; r < 6; r++){
            if(CheckSimpleBoard[start_i - r][start_j + r] != 1){
                ban=0;
                break;
            }
        }
        if(ban == 1){
            out = 1;
            break;
        }
    }
    return out;
}


int CheckSimpleMulti4(int i, int j){
    int out=0;
    int count=0;
    count = CheckSimple4Row(i,j)+CheckSimple4Col(i,j)+CheckSimple4AtoD(i,j)+CheckSimple4BtoC(i,j);
    if(count>=2){
        out = 1;
    }
    return out;
}


int CheckSimple4Row(int i,int j){//?????????????????
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start = j - 4 > 0 ? j - 4 : 0;//?????λ????????0
    int end = j + 4 < 14 ? j + 4 : 14;//??????λ????????14

    if(CheckSimple4StrRow(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = start; k <= j; k++) {//?????????????"?п?"????????
        count = 0;
        check_available = 0;
        for(r = 0 ; r < 5; r++){
            if(CheckSimpleBoard[i][k+r] == 1){
                count++;
            }
            if (k + r > end || CheckSimpleBoard[i][k + r] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 4){//??????????λ????????????, ???????п???
                for(q = 0; q < 4; q++){
                    if(CheckSimpleBoard[i][k+q]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(count==4 && check_available==1){//????????λ???????????????????????????Ч?????
            out ++;
        }
    }
    return out;
}

int CheckSimple4StrRow(int i,int j){//??????????????, ????а???(i,j)???????????
    int out = 0;
    int k, r;

    int start = j - 3 > 0 ? j - 3 : 0;
    int end = j + 3 < 14 ? j + 3 : 14;

    for (k = start; k <= j; k++) {
        int check = 1;
        for (r = 0; r < 4; r++) {
            if (k + r > end || CheckSimpleBoard[i][k + r] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ?????????????????????????Ч?????????
            if(k-1>=0 && CheckSimpleBoard[i][k-1]==0){//???????п???, ??λ?????????
                out=1;
                break;
            }
            if(k+4<=14 && CheckSimpleBoard[i][k+4]==0){
                out=1;
                break;
            }
        }
    }
    return out;
}

int CheckSimple4Col(int i,int j){//?????????????????
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start = i - 4 > 0 ? i - 4 : 0;//?????λ????????0
    int end = i + 4 < 14 ? i + 4 : 14;//??????λ????????14

    if(CheckSimple4StrCol(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = start; k <= i; k++) {//?????????????"?п?"????????
        count = 0;
        check_available = 0;
        for(r = 0 ; r < 5; r++){
            if(CheckSimpleBoard[k+r][j] == 1){
                count++;
            }
            if (k + r > end || CheckSimpleBoard[k + r][j] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 4){//??????????λ????????????, ???????п???
                for(q = 0; q < 5; q++){
                    if(CheckSimpleBoard[k+q][j]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(count==4 && check_available==1){//????????λ???????????????????????????Ч?????
            out ++;
        }
    }
    return out;
}

int CheckSimple4StrCol(int i,int j){//??????????????, ????а???(i,j)????????????
    int out = 0;
    int k, r;

    int start = i - 3 > 0 ? i - 3 : 0;
    int end = i + 3 < 14 ? i + 3 : 14;

    for (k = start; k <= i; k++) {
        int check = 1;
        for (r = 0; r < 4; r++) {
            if (k + r > end || CheckSimpleBoard[k + r][j] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ?????????????????????????Ч?????????
            if(k-1>=0 && CheckSimpleBoard[k-1][j]==0){//???????п???, ??λ?????????
                out = 1;
                break;
            }
            if(k+4<=14 && CheckSimpleBoard[k+4][j]==0){
                out = 1;
                break;
            }
        }
    }
    return out;
}

int CheckSimple4AtoD(int i,int j){//???б????????????
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start_i = i - 4 > 0 ? i - 4 : 0;//?????λ????????0
    int start_j = j - 4 > 0 ? j - 4 : 0;
    int end_i = i + 4 < 14 ? i + 4 : 14;//??????λ????????14
    int end_j = j + 4 < 14 ? j + 4 : 14;

    if(CheckSimple4StrAtoD(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = -4; k <= 0; k++) {//???б????????"?п?"????????
        if(i+k<0 || j+k<0)
            continue;//????????????С??0

        count = 0;
        check_available = 0;
        for(r = 0 ; r < 5; r++){
            if(CheckSimpleBoard[i+k+r][j+k+r] == 1){
                count++;
            }
            if (i + k + r > end_i || j + k + r > end_j || CheckSimpleBoard[i + k + r][j + k + r] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 4){//??????????λ????????????, ???????п???
                for(q = 0; q < 5; q++){
                    if(CheckSimpleBoard[i+k+q][j+k+q]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(count==4 && check_available==1){//????????λ?????????????????????λ????Ч?????
            out ++;
        }
    }
    return out;
}

int CheckSimple4StrAtoD(int i,int j){//??????????????, ????а???(i,j)??б????????
    int out = 0;
    int k, r;

    int start_i = i - 3 > 0 ? i - 3 : 0;
    int start_j = j - 3 > 0 ? j - 3 : 0;
    int end_i = i + 3 < 14 ? i + 3 : 14;
    int end_j = j + 3 < 14 ? j + 3 : 14;

    for (k = -3; k <= 0; k++) {
        int check = 1;
        if(i+k<0 || j+k<0)
            continue;//????????С???0, ??????????????

        for (r = 0; r < 4; r++) {
            if (i + k + r > end_i || j + k + r > end_j || CheckSimpleBoard[i + k + r][j + k + r] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ?????????????????????????Ч?????????
            if(i+k-1>=0 && j+k-1>=0 && CheckSimpleBoard[i+k-1][j+k-1]==0){//???????п???, ??λ?????????
                out = 1;
                break;
            }
            if(i+k+4<=14 && j+k+4<=14 && CheckSimpleBoard[i+k+4][j+k+4]==0){
                out = 1;
                break;
            }
        }
    }
    return out;
}

int CheckSimple4BtoC(int i,int j){
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start_i = i + 4 < 14 ? i + 4 : 14;//?????λ????????14
    int start_j = j - 4 > 0 ? j - 4 : 0;
    int end_i = i - 4 > 0 ? i - 4 : 0;//??????λ????????0
    int end_j = j + 4 < 14 ? j + 4 : 14;

    if(CheckSimple4StrBtoC(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = -4; k <= 0; k++) {//???б????????"?п?"????????
        if(i-k>=SIZE || j+k<0)
            continue;//???????????????

        count = 0;
        check_available = 0;
        for(r = 0 ; r < 5; r++){
            if(CheckSimpleBoard[i-k-r][j+k+r] == 1){
                count++;
            }
            if (i - k - r < end_i || j + k + r > end_j || CheckSimpleBoard[i - k - r][j + k + r] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 4){//??????????λ????????????, ???????п???
                for(q = 0; q < 5; q++){
                    if(CheckSimpleBoard[i-k-q][j+k+q]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(count==4 && check_available==1){//????????λ???????????????????????
            out ++;
        }
    }
    return out;
}

int CheckSimple4StrBtoC(int i,int j){//??????????????, ????а???(i,j)??б????????
    int out = 0;
    int k, r;

    int start_i = i + 3 < 14 ? i + 3 : 14;
    int start_j = j - 3 > 0 ? j - 3 : 0;
    int end_i = i - 3 > 0 ? i - 3 : 0;
    int end_j = j + 3 < 14 ? j + 3 : 14;

    for (k = -3; k <= 0; k++) {
        int check = 1;
        if(i-k>=SIZE || j+k<0)
            continue;//????????????, ??????????????

        for (r = 0; r < 4; r++) {
            if (i - k - r < end_i || j + k + r > end_j || CheckSimpleBoard[i - k - r][j + k + r] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ?????????????????????????Ч?????????
            if(i-k+1<=14 && j+k-1>=0 && CheckSimpleBoard[i-k+1][j+k-1]==0){//???????п???, ??λ?????????
                out = 1;
                break;
            }
            if(i-k-4>=0 && j+k+4<=14 && CheckSimpleBoard[i-k-4][j+k+4]==0){
                out = 1;
                break;
            }
        }
    }
    return out;
}

int CheckSimpleMulti3(int i,int j){
    int out=0;
    int count=0;
    count = CheckSimple3Row(i,j)+CheckSimple3Col(i,j)+CheckSimple3AtoD(i,j)+CheckSimple3BtoC(i,j);
    if(count>=2){
        out= 1;
    }
    return out;
}

int CheckSimple3Row(int i,int j){
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start = j - 3 > 0 ? j - 3 : 0;//?????λ????????0
    int end = j + 3 < 14 ? j + 3 : 14;//??????λ????????14

    if(CheckSimple3StrRow(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = start; k <= j; k++) {//?????????????"?п?"????????, ????????п????????, ???????????????????
        count = 0;
        check_available = 0;
        for(r = 0 ; r < 4; r++){//??????λ????????????????
            if(CheckSimpleBoard[i][k+r] == 1){
                count++;
            }
            if (k + r > end || CheckSimpleBoard[i][k + r] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 3){//??????????λ??????????????, ?????????????????
                for(q = 0; q < 4; q++){
                    if(CheckSimpleBoard[i][k+q]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }//????????ж??, ??????????????γ????????
                }
        }
        if(check_available==1){//????????λ????????????????????????????Ч???λ, ???????λ?????1

            if(k-1>=0 && CheckSimpleBoard[i][k-1]==0 && k+4<=14 && CheckSimpleBoard[i][k+4]==0){//??????????????γ????????????????
                out++;//????????γ?????????????????
            }

        }
    }
    return out;
}

int CheckSimple3StrRow(int i,int j){//?????????????y???????
    int out = 0;
    int k, r;

    int start = j - 2 > 0 ? j - 2 : 0;
    int end = j + 2 < 14 ? j + 2 : 14;

    for (k = start; k <= j; k++) {
        int check = 1;
        for (r = 0; r < 3; r++) {
            if (k + r > end || CheckSimpleBoard[i][k + r] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ???????????????????????????????
            if(k-1>=0 && CheckSimpleBoard[i][k-1]==0){//?????????????????
                if(k-2>=0 && CheckSimpleBoard[i][k-2]==0 ){//??????????????????????Ч
                    if(k+3<=14 && CheckSimpleBoard[i][k+3]==0){
                        out = 1;
                        break;
                    }
                }
            }
            if(k+3<=14 && CheckSimpleBoard[i][k+3]==0){//??????????????????
                CheckSimpleBoard[i][k+3]=1;
                if(k+4<=14 && CheckSimpleBoard[i][k+4]==0){//???????????????????????Ч
                    if(k-1>=0 && CheckSimpleBoard[i][k-1]==0){
                        out = 1;
                        break;
                    }
                }
            }
        }
    }
    return out;
}

int CheckSimple3Col(int i,int j){
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start = i - 3 > 0 ? i - 3 : 0;//?????λ????????0
    int end = i + 3 < 14 ? i + 3 : 14;//??????λ????????14

    if(CheckSimple3StrCol(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = start; k <= i; k++) {//?????????????"?п?"????????
        count = 0;
        check_available = 0;
        for(r = 0 ; r < 4; r++){
            if(CheckSimpleBoard[k+r][j] == 1){
                count++;
            }
            if (k + r > end || CheckSimpleBoard[k + r][j] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 3){//??????????λ??????????????, ???????п???
                for(q = 0; q < 4; q++){
                    if(CheckSimpleBoard[k+q][j]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(check_available==1){//????????λ????????????????????????????Ч???λ

            if(k-1>=0 && CheckSimpleBoard[k-1][j]==0&& k+4<=14 && CheckSimpleBoard[k+4][j]==0){//??????????????γ????????????????
                out++;
            }

        }
    }
    return out;
}

int CheckSimple3StrCol(int i,int j){//?????????????y???????
    int out = 0;
    int k, r;

    int start = i - 2 > 0 ? i - 2 : 0;
    int end = i + 2 < 14 ? i + 2 : 14;

    for (k = start; k <= i; k++) {
        int check = 1;
        for (r = 0; r < 3; r++) {
            if (k + r > end || CheckSimpleBoard[k + r][j] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ???????????????????????????????
            if(k-1>=0 && CheckSimpleBoard[k-1][j]==0){//?????????????????

                if(k-2>=0 && CheckSimpleBoard[k-2][j]==0){//??????????????????????Ч
                    if(k+3<=14 && CheckSimpleBoard[k+3][j]==0){
                        out = 1;
                        break;
                    }
                }

            }
            if(k+3<=14 && CheckSimpleBoard[k+3][j]==0){//??????????????????

                if(k+4<=14 && CheckSimpleBoard[k+4][j]==0){//???????????????????????Ч
                    if(k-1>=0 && CheckSimpleBoard[k-1][j]==0){
                        out = 1;
                        break;
                    }
                }

            }
        }
    }
    return out;
}

int CheckSimple3AtoD(int i,int j){
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start_i = i - 3 > 0 ? i - 3 : 0;//?????λ????????0
    int start_j = j - 3 > 0 ? j - 3 : 0;
    int end_i = i + 3 < 14 ? i + 3 : 14;//??????λ????????14
    int end_j = j + 3 < 14 ? j + 3 : 14;

    if(CheckSimple3StrAtoD(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = -3; k <= 0; k++) {//???б????????"?п?"????????
        if(i+k<0 || j+k<0)
            continue;//???????????????

        count = 0;
        check_available = 0;
        for(r = 0 ; r < 4; r++){
            if(CheckSimpleBoard[i+k+r][j+k+r] == 1){
                count++;
            }
            if (i + k + r > end_i || j + k + r > end_j || CheckSimpleBoard[i + k + r][j + k + r] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 3){//??????????λ??????????????, ???????п???
                for(q = 0; q < 4; q++){
                    if(CheckSimpleBoard[i+k+q][j+k+q]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(check_available==1){//????????λ????????????????????????????Ч??
           
            if((i+k-1>=0 && j+k-1>=0) && CheckSimpleBoard[i+k-1][j+k-1]==0&& (i+k+4<=14 && j+k+4<=14) && 
            CheckSimpleBoard[i+k+4][j+k+4]==0){//??????????????γ????????????????
                out++;
            }

        }
    }   
    return out;
}

int CheckSimple3StrAtoD(int i,int j){//?????????????y???????
    int out = 0;
    int k, r;

    int start_i = i - 2 > 0 ? i - 2 : 0;
    int start_j = j - 2 > 0 ? j - 2 : 0;
    int end_i = i + 2 < 14 ? i + 2 : 14;
    int end_j = j + 2 < 14 ? j + 2 : 14;

    for (k = -2; k <= 0; k++) {
        int check = 1;
        if(i+k<0 || j+k<0)
            continue;//????????????, ??????????????

        for (r = 0; r < 3; r++) {
            if (i + k + r > end_i || j + k + r > end_j || CheckSimpleBoard[i + k + r][j + k + r] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ???????????????????????????????
            if(i+k-1>=0 && j+k-1>=0 && CheckSimpleBoard[i+k-1][j+k-1]==0){//???????п???, ??λ?????????

                if(i+k-2>=0 && j+k-2>=0 && CheckSimpleBoard[i+k-2][j+k-2]==0){//???????п???, ??λ?????????
                    if(i+k+3<=14 && j+k+3<=14 && CheckSimpleBoard[i+k+3][j+k+3]==0){
                        out = 1;
                        break;
                    }
                }

            }
            if(i+k+3<=14 && j+k+3<=14 && CheckSimpleBoard[i+k+3][j+k+3]==0 ){//???????п???, ??λ?????????

                if(i+k+4<=14 && j+k+4<=14 && CheckSimpleBoard[i+k+4][j+k+4]==0){//???????п???, ??λ?????????
                    if(i+k-1>=0 && j+k-1>=0 && CheckSimpleBoard[i+k-1][j+k-1]==0){
                        out = 1;
                        break;
                    }
                }

            }
        }
    }
    return out;
}

int CheckSimple3BtoC(int i,int j){
    int count=0;
    int out=0;
    int check_available;

    int k,r,q;
    int start_i = i + 3 < 14 ? i + 3 : 14;//?????λ????????14
    int start_j = j - 3 > 0 ? j - 3 : 0;
    int end_i = i - 3 > 0 ? i - 3 : 0;//??????λ????????0
    int end_j = j + 3 < 14 ? j + 3 : 14;

    if(CheckSimple3StrBtoC(i,j)==1){//???????????Ч????????, ??????1
        return 1;
    }

    for (k = -3; k <= 0; k++) {//???б????????"?п?"????????
        if(i-k>=SIZE || j+k<0)
            continue;//???????????????

        count = 0;
        check_available = 0;
        for(r = 0 ; r < 4; r++){
            if(CheckSimpleBoard[i-k-r][j+k+r] == 1){
                count++;
            }
            if (i - k - r < end_i || j + k + r > end_j || CheckSimpleBoard[i - k - r][j + k + r] == 2) {//??????????????????????, ??????????
                count = 0;
                break;
            }
        }
        if(count == 3){//??????????λ??????????????, ???????п???
                for(q = 0; q < 4; q++){
                    if(CheckSimpleBoard[i-k-q][j+k+q]==0){//????п???, ?????????λ????????
                        check_available = 1;
                        break;
                    }
                }
        }
        if(check_available==1){

            if((i-k+1<=14 && j+k-1>=0) && CheckSimpleBoard[i-k+1][j+k-1]==0&& (i-k-4>=0 && j+k+4<=14) && 
            CheckSimpleBoard[i-k-4][j+k+4]==0){//??????????????γ????????????????
                out++;
            }

        }
    }
    return out;
}

int CheckSimple3StrBtoC(int i,int j){//?????????????y???????
    int out = 0;
    int k, r;

    int start_i = i + 2 < 14 ? i + 2 : 14;
    int start_j = j - 2 > 0 ? j - 2 : 0;
    int end_i = i - 2 > 0 ? i - 2 : 0;
    int end_j = j + 2 < 14 ? j + 2 : 14;

    for (k = -2; k <= 0; k++) {
        int check = 1;
        if(i-k>=SIZE || j+k<0)
            continue;//????????????, ??????????????

        for (r = 0; r < 3; r++) {
            if (i - k - r < end_i || j + k + r > end_j || CheckSimpleBoard[i - k - r][j + k + r] != 1) {
                check = 0;
                break;
            }
        }
        if (check) {//????????????????, ???????????????????????????????
            if(i-k+1<=14 && j+k-1>=0 && CheckSimpleBoard[i-k+1][j+k-1]==0 ){//???????п???, ??λ?????????

                if(i-k+2<=14 && j+k-2>=0 && CheckSimpleBoard[i-k+2][j+k-2]==0){//???????п???, ??λ?????????
                    if(i-k-3>=0 && j+k+3<=14 && CheckSimpleBoard[i-k-3][j+k+3]==0){
                        out = 1;
                        break;
                    }
                }

            }
            if(i-k-3>=0 && j+k+3<=14 && CheckSimpleBoard[i-k-3][j+k+3]==0){//???????п???, ??λ?????????

                if(i-k-4>=0 && j+k+4<=14 && CheckSimpleBoard[i-k-4][j+k+4]==0){//???????п???, ??λ?????????
                    if(i-k+1<=14 && j+k-1>=0 && CheckSimpleBoard[i-k+1][j+k-1]==0){
                        out = 1;
                        break;
                     }
                }

            }
        }
    }
    return out;
}